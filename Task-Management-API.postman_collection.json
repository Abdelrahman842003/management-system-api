{
	"info": {
		"_postman_id": "task-management-api-v1",
		"name": "Task Management API",
		"description": "# Task Management API Collection\n\nComplete API collection for Task Management System with role-based access control.\n\n## üöÄ Quick Start\n\n1. **Start the server**: `php artisan serve`\n2. **Login as Manager**: Use `Authentication ‚Üí Login - Manager`\n3. **Create tasks**: Use `Tasks - CRUD ‚Üí Create Task`\n4. **Test scenarios**: Follow `Test Scenarios ‚Üí Scenario 1`\n\n## üë• User Roles\n\n### Manager\n- ‚úÖ Create, update, delete tasks\n- ‚úÖ Assign tasks to users\n- ‚úÖ View all tasks\n- ‚úÖ Manage task dependencies\n- **Default credentials**: `manager1@example.com` / `password`\n\n### User\n- ‚úÖ View assigned tasks only\n- ‚úÖ Update status of assigned tasks\n- ‚ùå Cannot create or delete tasks\n- **Default credentials**: `user1@example.com` / `password`\n\n## üìã Task Dependencies\n\nTasks can depend on other tasks. A task cannot be completed until all its dependencies are completed.\n\n**Example**:\n- Task A depends on Task B\n- Task B must be completed before Task A can be completed\n\n## ‚ö†Ô∏è Important Notes\n\n- **Authentication**: Most endpoints require authentication. Login first!\n- **Task IDs**: Make sure tasks exist before referencing them\n- **Dependencies**: A task cannot depend on itself\n- **Circular Dependencies**: Not allowed (A‚ÜíB‚ÜíC‚ÜíA)\n\n## üîß Variables\n\n- `base_url`: API base URL (default: http://localhost:8000/api)\n- `access_token`: Auto-saved after login\n- `task_1_id`: Auto-saved after creating Task 1\n- `task_2_id`: Auto-saved after creating Task 2",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	},
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000/api",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "task_1_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "task_2_id",
			"value": "",
			"type": "string"
		}
	],
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Register - Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const token = pm.response.json().data?.token;",
									"    if (token) {",
									"        pm.collectionVariables.set('access_token', token);",
									"        console.log('Token saved:', token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"New Manager\",\n    \"email\": \"newmanager@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"role\": \"manager\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": ["{{base_url}}"],
							"path": ["auth", "register"]
						},
						"description": "Register a new manager account"
					},
					"response": []
				},
				{
					"name": "Register - User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const token = pm.response.json().data?.token;",
									"    if (token) {",
									"        pm.collectionVariables.set('access_token', token);",
									"        console.log('Token saved:', token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"New User\",\n    \"email\": \"newuser@example.com\",\n    \"password\": \"password123\",\n    \"password_confirmation\": \"password123\",\n    \"role\": \"user\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/register",
							"host": ["{{base_url}}"],
							"path": ["auth", "register"]
						},
						"description": "Register a new regular user account"
					},
					"response": []
				},
				{
					"name": "Login - Manager",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const token = pm.response.json().data?.token;",
									"    if (token) {",
									"        pm.collectionVariables.set('access_token', token);",
									"        console.log('Token saved:', token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"manager1@example.com\",\n    \"password\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Login as manager with full permissions"
					},
					"response": []
				},
				{
					"name": "Login - User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const token = pm.response.json().data?.token;",
									"    if (token) {",
									"        pm.collectionVariables.set('access_token', token);",
									"        console.log('Token saved:', token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"user1@example.com\",\n    \"password\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Login as regular user with limited permissions"
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/user",
							"host": ["{{base_url}}"],
							"path": ["auth", "user"]
						},
						"description": "Get authenticated user information with roles and permissions"
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["auth", "logout"]
						},
						"description": "Logout and revoke current token"
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for login, logout, and user information"
		},
		{
			"name": "Tasks - CRUD",
			"item": [
				{
					"name": "List All Tasks",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks"]
						},
						"description": "Get all tasks (managers see all, users see only assigned)"
					},
					"response": []
				},
				{
					"name": "List Tasks - Filter by Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks?status=pending",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks"],
							"query": [
								{
									"key": "status",
									"value": "pending",
									"description": "pending, completed, or canceled"
								}
							]
						},
						"description": "Filter tasks by status"
					},
					"response": []
				},
				{
					"name": "List Tasks - Filter by Date Range",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks?due_date_from=2025-01-01&due_date_to=2025-12-31",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks"],
							"query": [
								{
									"key": "due_date_from",
									"value": "2025-01-01"
								},
								{
									"key": "due_date_to",
									"value": "2025-12-31"
								}
							]
						},
						"description": "Filter tasks by due date range"
					},
					"response": []
				},
				{
					"name": "List Tasks - Filter by Assigned User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks?assigned_to=3",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks"],
							"query": [
								{
									"key": "assigned_to",
									"value": "3",
									"description": "User ID"
								}
							]
						},
						"description": "Filter tasks by assigned user"
					},
					"response": []
				},
				{
					"name": "Get Task by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks/1",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "1"]
						},
						"description": "Get a specific task with all its details including dependencies"
					},
					"response": []
				},
				{
					"name": "Create Task",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// ‚ö†Ô∏è IMPORTANT: This endpoint requires MANAGER role!",
									"// Make sure you logged in as Manager first:",
									"// Authentication ‚Üí Login - Manager",
									"",
									"if (!pm.collectionVariables.get('access_token')) {",
									"    console.warn('‚ö†Ô∏è No token found! Please login first as Manager.');",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Complete API Documentation\",\n    \"description\": \"Write comprehensive documentation for all API endpoints\",\n    \"assigned_to\": 3,\n    \"due_date\": \"2025-12-31\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/tasks",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks"]
						},
						"description": "‚ö†Ô∏è **MANAGER ONLY!**\n\nCreate a new task. This endpoint requires the `create-task` permission which is only available to Managers.\n\n**Required:**\n- Login as Manager first: `Authentication ‚Üí Login - Manager`\n- Permission: `create-task`\n\n**Regular Users cannot create tasks!**"
					},
					"response": []
				},
				{
					"name": "Update Task",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\": \"Updated Task Title\",\n    \"description\": \"Updated description\",\n    \"status\": \"completed\",\n    \"assigned_to\": 4,\n    \"due_date\": \"2025-12-25\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/tasks/1",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "1"]
						},
						"description": "Update task details (Manager only)"
					},
					"response": []
				},
				{
					"name": "Update Task Status (User)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"completed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/tasks/1/status",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "1", "status"]
						},
						"description": "Update only the status of assigned task (User can do this)"
					},
					"response": []
				},
				{
					"name": "Delete Task",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks/1",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "1"]
						},
						"description": "Delete a task (Manager only)"
					},
					"response": []
				}
			],
			"description": "CRUD operations for tasks"
		},
		{
			"name": "Task Dependencies",
			"item": [
				{
					"name": "Add Task Dependency",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"depends_on_task_id\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/v1/tasks/2/dependencies",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "2", "dependencies"]
						},
						"description": "‚ö†Ô∏è IMPORTANT: Make sure both tasks exist first!\n\nThis example: Task 2 depends on Task 1\nMeaning: Task 1 must be completed before Task 2 can be completed.\n\nüî¥ Common Errors:\n- Task ID doesn't exist ‚Üí Create tasks first using POST /v1/tasks\n- Task cannot depend on itself ‚Üí Use different IDs\n- Circular dependency ‚Üí A‚ÜíB‚ÜíC‚ÜíA is not allowed\n- Dependency already exists ‚Üí Each dependency can only be added once"
					},
					"response": []
				},
				{
					"name": "Remove Task Dependency",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/v1/tasks/2/dependencies/1",
							"host": ["{{base_url}}"],
							"path": ["v1", "tasks", "2", "dependencies", "1"]
						},
						"description": "Remove a dependency from a task.\n\nExample: DELETE /v1/tasks/2/dependencies/1\nRemoves the dependency where Task 2 depends on Task 1."
					},
					"response": []
				}
			],
			"description": "Manage task dependencies"
		},
		{
			"name": "Test Scenarios",
			"item": [
				{
					"name": "Scenario 1 - Create Task with Dependencies",
					"item": [
						{
							"name": "Step 1: Login as Manager",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 200) {",
											"    const token = pm.response.json().data?.token;",
											"    if (token) {",
											"        pm.collectionVariables.set('access_token', token);",
											"        console.log('‚úÖ Logged in successfully');",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"email\": \"manager1@example.com\",\n    \"password\": \"password\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/auth/login",
									"host": ["{{base_url}}"],
									"path": ["auth", "login"]
								},
								"description": "‚ö†Ô∏è IMPORTANT: Must login as Manager first!"
							},
							"response": []
						},
						{
							"name": "Step 2: Create Base Task (Task 1)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const taskId = pm.response.json().data?.id;",
											"    if (taskId) {",
											"        pm.collectionVariables.set('task_1_id', taskId);",
											"        console.log('‚úÖ Task 1 created with ID:', taskId);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Setup Development Environment\",\n    \"description\": \"Install required tools and dependencies\",\n    \"assigned_to\": 3,\n    \"due_date\": \"2025-11-20\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks"]
								},
								"description": "Create the first task that other tasks will depend on"
							},
							"response": []
						},
						{
							"name": "Step 3: Create Second Task (Task 2)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"if (pm.response.code === 201) {",
											"    const taskId = pm.response.json().data?.id;",
											"    if (taskId) {",
											"        pm.collectionVariables.set('task_2_id', taskId);",
											"        console.log('‚úÖ Task 2 created with ID:', taskId);",
											"    }",
											"}"
										],
										"type": "text/javascript"
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"title\": \"Write API Tests\",\n    \"description\": \"Create comprehensive test suite\",\n    \"assigned_to\": 3,\n    \"due_date\": \"2025-11-25\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks"]
								},
								"description": "Create second task that will depend on Task 1"
							},
							"response": []
						},
						{
							"name": "Step 4: Add Dependency (Task 2 depends on Task 1)",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"depends_on_task_id\": {{task_1_id}}\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks/{{task_2_id}}/dependencies",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "{{task_2_id}}", "dependencies"]
								},
								"description": "‚ö†Ô∏è IMPORTANT: Make sure task_1_id and task_2_id variables are set!\n\nThis makes Task 2 depend on Task 1, meaning Task 1 must be completed before Task 2 can be completed."
							},
							"response": []
						},
						{
							"name": "Step 5: View Task 2 with Dependencies",
							"request": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/v1/tasks/{{task_2_id}}",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "{{task_2_id}}"]
								},
								"description": "View Task 2 to see its dependencies"
							},
							"response": []
						}
					],
					"description": "Complete workflow to create tasks with dependencies.\n\nüìù Steps:\n1. Login as Manager\n2. Create Task 1 (Base task)\n3. Create Task 2 (Dependent task)\n4. Add dependency (Task 2 depends on Task 1)\n5. View Task 2 with its dependencies"
				},
				{
					"name": "Scenario 2 - Validation Tests",
					"item": [
						{
							"name": "Test 1: Create task without title",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"description\": \"This should fail - no title provided\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks"]
								},
								"description": "‚ùå Expected: 422 Validation Error\n\nError: \"Task title is required.\""
							},
							"response": []
						},
						{
							"name": "Test 2: Add non-existent task as dependency",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"depends_on_task_id\": 99999\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks/1/dependencies",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "1", "dependencies"]
								},
								"description": "‚ùå Expected: 422 Validation Error\n\nError: \"The selected task (ID: 99999) does not exist. Please create the task first or use a valid task ID.\""
							},
							"response": []
						},
						{
							"name": "Test 3: Task depends on itself",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"depends_on_task_id\": 1\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks/1/dependencies",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "1", "dependencies"]
								},
								"description": "‚ùå Expected: 422 Validation Error\n\nError: \"A task cannot depend on itself.\""
							},
							"response": []
						},
						{
							"name": "Test 4: Complete task with pending dependencies",
							"request": {
								"method": "PATCH",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"status\": \"completed\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks/{{task_2_id}}/status",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "{{task_2_id}}", "status"]
								},
								"description": "‚ùå Expected: 422 Validation Error (if Task 1 is not completed)\n\nError: \"Cannot complete task. Some dependencies are not yet completed. Pending dependencies: Setup Development Environment\"\n\n‚ö†Ô∏è Prerequisites:\n1. Task 2 must exist and be assigned to you\n2. Task 2 must depend on Task 1\n3. Task 1 must NOT be completed yet"
							},
							"response": []
						},
						{
							"name": "Test 5: Add duplicate dependency",
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"depends_on_task_id\": {{task_1_id}}\n}"
								},
								"url": {
									"raw": "{{base_url}}/v1/tasks/{{task_2_id}}/dependencies",
									"host": ["{{base_url}}"],
									"path": ["v1", "tasks", "{{task_2_id}}", "dependencies"]
								},
								"description": "‚ùå Expected: 422 Validation Error (if dependency already exists)\n\nError: \"This dependency already exists. Task X already depends on Task Y.\"\n\n‚ö†Ô∏è Prerequisites:\n- The dependency must already exist (run Test Scenario 1 first)"
							},
							"response": []
						}
					],
					"description": "Test various validation scenarios to ensure proper error handling.\n\n‚úÖ All tests should return proper error messages with status 422."
				}
			],
			"description": "Complete test scenarios demonstrating various features"
		}
	]
}

